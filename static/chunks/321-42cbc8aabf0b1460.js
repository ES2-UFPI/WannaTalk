"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{4492:function(e,t,n){/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useState,a=r.useEffect,i=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=l({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return i(function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})},[e,n,t]),a(function(){return c(o)&&u({inst:o}),e(function(){c(o)&&u({inst:o})})},[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},554:function(e,t,n){e.exports=n(4492)},2988:function(e,t,n){n.d(t,{Z:function(){return r}});function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},4458:function(e,t,n){n.d(t,{Ee:function(){return w},NY:function(){return y},fC:function(){return v}});var r=n(2988),o=n(2265),l=n(8324),a=n(5137),i=n(1336),s=n(5171);let c="Avatar",[u,d]=(0,l.b)(c),[f,p]=u(c),m=(0,o.forwardRef)((e,t)=>{let{__scopeAvatar:n,...l}=e,[a,i]=(0,o.useState)("idle");return(0,o.createElement)(f,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i},(0,o.createElement)(s.WV.span,(0,r.Z)({},l,{ref:t})))}),g=(0,o.forwardRef)((e,t)=>{let{__scopeAvatar:n,src:l,onLoadingStatusChange:c=()=>{},...u}=e,d=p("AvatarImage",n),f=function(e){let[t,n]=(0,o.useState)("idle");return(0,i.b)(()=>{if(!e){n("error");return}let t=!0,r=new window.Image,o=e=>()=>{t&&n(e)};return n("loading"),r.onload=o("loaded"),r.onerror=o("error"),r.src=e,()=>{t=!1}},[e]),t}(l),m=(0,a.W)(e=>{c(e),d.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==f&&m(f)},[f,m]),"loaded"===f?(0,o.createElement)(s.WV.img,(0,r.Z)({},u,{ref:t,src:l})):null}),h=(0,o.forwardRef)((e,t)=>{let{__scopeAvatar:n,delayMs:l,...a}=e,i=p("AvatarFallback",n),[c,u]=(0,o.useState)(void 0===l);return(0,o.useEffect)(()=>{if(void 0!==l){let e=window.setTimeout(()=>u(!0),l);return()=>window.clearTimeout(e)}},[l]),c&&"loaded"!==i.imageLoadingStatus?(0,o.createElement)(s.WV.span,(0,r.Z)({},a,{ref:t})):null}),v=m,w=g,y=h},1584:function(e,t,n){n.d(t,{F:function(){return o},e:function(){return l}});var r=n(2265);function o(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function l(...e){return(0,r.useCallback)(o(...e),e)}},8324:function(e,t,n){n.d(t,{b:function(){return o}});var r=n(2265);function o(e,t=[]){let n=[],o=()=>{let t=n.map(e=>(0,r.createContext)(e));return function(n){let o=(null==n?void 0:n[e])||t;return(0,r.useMemo)(()=>({[`__scope${e}`]:{...n,[e]:o}}),[n,o])}};return o.scopeName=e,[function(t,o){let l=(0,r.createContext)(o),a=n.length;function i(t){let{scope:n,children:o,...i}=t,s=(null==n?void 0:n[e][a])||l,c=(0,r.useMemo)(()=>i,Object.values(i));return(0,r.createElement)(s.Provider,{value:c},o)}return n=[...n,o],i.displayName=t+"Provider",[i,function(n,i){let s=(null==i?void 0:i[e][a])||l,c=(0,r.useContext)(s);if(c)return c;if(void 0!==o)return o;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=n.reduce((t,{useScope:n,scopeName:r})=>{let o=n(e)[`__scope${r}`];return{...t,...o}},{});return(0,r.useMemo)(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}(o,...t)]}},5171:function(e,t,n){n.d(t,{WV:function(){return a}});var r=n(2988),o=n(2265);n(4887);var l=n(1538);let a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=(0,o.forwardRef)((e,n)=>{let{asChild:a,...i}=e,s=a?l.g7:t;return(0,o.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,o.createElement)(s,(0,r.Z)({},i,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{})},843:function(e,t,n){n.d(t,{Ns:function(){return q},fC:function(){return $},gb:function(){return S},q4:function(){return P},l_:function(){return B}});var r=n(2988),o=n(2265),l=n(5171),a=n(4887),i=n(1584),s=n(1336);let c=e=>{let{present:t,children:n}=e,r=function(e){var t,n;let[r,l]=(0,o.useState)(),i=(0,o.useRef)({}),c=(0,o.useRef)(e),d=(0,o.useRef)("none"),[f,p]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,o.useReducer)((e,t)=>{let r=n[e][t];return null!=r?r:e},t));return(0,o.useEffect)(()=>{let e=u(i.current);d.current="mounted"===f?e:"none"},[f]),(0,s.b)(()=>{let t=i.current,n=c.current;if(n!==e){let r=d.current,o=u(t);e?p("MOUNT"):"none"===o||(null==t?void 0:t.display)==="none"?p("UNMOUNT"):n&&r!==o?p("ANIMATION_OUT"):p("UNMOUNT"),c.current=e}},[e,p]),(0,s.b)(()=>{if(r){let e=e=>{let t=u(i.current).includes(e.animationName);e.target===r&&t&&(0,a.flushSync)(()=>p("ANIMATION_END"))},t=e=>{e.target===r&&(d.current=u(i.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),()=>{r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}p("ANIMATION_END")},[r,p]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:(0,o.useCallback)(e=>{e&&(i.current=getComputedStyle(e)),l(e)},[])}}(t),l="function"==typeof n?n({present:r.isPresent}):o.Children.only(n),c=(0,i.e)(r.ref,l.ref);return"function"==typeof n||r.isPresent?(0,o.cloneElement)(l,{ref:c}):null};function u(e){return(null==e?void 0:e.animationName)||"none"}c.displayName="Presence";var d=n(8324),f=n(5137);let p=(0,o.createContext)(void 0);function m(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}let g="ScrollArea",[h,v]=(0,d.b)(g),[w,y]=h(g),b=(0,o.forwardRef)((e,t)=>{let{__scopeScrollArea:n,type:a="hover",dir:s,scrollHideDelay:c=600,...u}=e,[d,f]=(0,o.useState)(null),[m,g]=(0,o.useState)(null),[h,v]=(0,o.useState)(null),[y,b]=(0,o.useState)(null),[E,_]=(0,o.useState)(null),[S,C]=(0,o.useState)(0),[T,R]=(0,o.useState)(0),[x,A]=(0,o.useState)(!1),[N,I]=(0,o.useState)(!1),L=(0,i.e)(t,e=>f(e)),O=function(e){let t=(0,o.useContext)(p);return e||t||"ltr"}(s);return(0,o.createElement)(w,{scope:n,type:a,dir:O,scrollHideDelay:c,scrollArea:d,viewport:m,onViewportChange:g,content:h,onContentChange:v,scrollbarX:y,onScrollbarXChange:b,scrollbarXEnabled:x,onScrollbarXEnabledChange:A,scrollbarY:E,onScrollbarYChange:_,scrollbarYEnabled:N,onScrollbarYEnabledChange:I,onCornerWidthChange:C,onCornerHeightChange:R},(0,o.createElement)(l.WV.div,(0,r.Z)({dir:O},u,{ref:L,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":T+"px",...e.style}})))}),E=(0,o.forwardRef)((e,t)=>{let{__scopeScrollArea:n,children:a,...s}=e,c=y("ScrollAreaViewport",n),u=(0,o.useRef)(null),d=(0,i.e)(t,u,c.onViewportChange);return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),(0,o.createElement)(l.WV.div,(0,r.Z)({"data-radix-scroll-area-viewport":""},s,{ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style}}),(0,o.createElement)("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"}},a)))}),_="ScrollAreaScrollbar",S=(0,o.forwardRef)((e,t)=>{let{forceMount:n,...l}=e,a=y(_,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,c="horizontal"===e.orientation;return(0,o.useEffect)(()=>(c?i(!0):s(!0),()=>{c?i(!1):s(!1)}),[c,i,s]),"hover"===a.type?(0,o.createElement)(C,(0,r.Z)({},l,{ref:t,forceMount:n})):"scroll"===a.type?(0,o.createElement)(T,(0,r.Z)({},l,{ref:t,forceMount:n})):"auto"===a.type?(0,o.createElement)(R,(0,r.Z)({},l,{ref:t,forceMount:n})):"always"===a.type?(0,o.createElement)(x,(0,r.Z)({},l,{ref:t})):null}),C=(0,o.forwardRef)((e,t)=>{let{forceMount:n,...l}=e,a=y(_,e.__scopeScrollArea),[i,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=a.scrollArea,t=0;if(e){let n=()=>{window.clearTimeout(t),s(!0)},r=()=>{t=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[a.scrollArea,a.scrollHideDelay]),(0,o.createElement)(c,{present:n||i},(0,o.createElement)(R,(0,r.Z)({"data-state":i?"visible":"hidden"},l,{ref:t})))}),T=(0,o.forwardRef)((e,t)=>{var n,l;let{forceMount:a,...i}=e,s=y(_,e.__scopeScrollArea),u="horizontal"===e.orientation,d=Y(()=>p("SCROLL_END"),100),[f,p]=(n="hidden",l={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},(0,o.useReducer)((e,t)=>{let n=l[e][t];return null!=n?n:e},n));return(0,o.useEffect)(()=>{if("idle"===f){let e=window.setTimeout(()=>p("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[f,s.scrollHideDelay,p]),(0,o.useEffect)(()=>{let e=s.viewport,t=u?"scrollLeft":"scrollTop";if(e){let n=e[t],r=()=>{let r=e[t];n!==r&&(p("SCROLL"),d()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[s.viewport,u,p,d]),(0,o.createElement)(c,{present:a||"hidden"!==f},(0,o.createElement)(x,(0,r.Z)({"data-state":"hidden"===f?"hidden":"visible"},i,{ref:t,onPointerEnter:m(e.onPointerEnter,()=>p("POINTER_ENTER")),onPointerLeave:m(e.onPointerLeave,()=>p("POINTER_LEAVE"))})))}),R=(0,o.forwardRef)((e,t)=>{let n=y(_,e.__scopeScrollArea),{forceMount:l,...a}=e,[i,s]=(0,o.useState)(!1),u="horizontal"===e.orientation,d=Y(()=>{if(n.viewport){let e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;s(u?e:t)}},10);return X(n.viewport,d),X(n.content,d),(0,o.createElement)(c,{present:l||i},(0,o.createElement)(x,(0,r.Z)({"data-state":i?"visible":"hidden"},a,{ref:t})))}),x=(0,o.forwardRef)((e,t)=>{let{orientation:n="vertical",...l}=e,a=y(_,e.__scopeScrollArea),i=(0,o.useRef)(null),s=(0,o.useRef)(0),[c,u]=(0,o.useState)({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=U(c.viewport,c.content),f={...l,sizes:c,onSizesChange:u,hasThumb:!!(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:e=>s.current=e};function p(e,t){return function(e,t,n,r="ltr"){let o=F(n),l=t||o/2,a=n.scrollbar.paddingStart+l,i=n.scrollbar.size-n.scrollbar.paddingEnd-(o-l),s=n.content-n.viewport;return z([a,i],"ltr"===r?[0,s]:[-1*s,0])(e)}(e,s.current,c,t)}return"horizontal"===n?(0,o.createElement)(A,(0,r.Z)({},f,{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){let e=Z(a.viewport.scrollLeft,c,a.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=p(e,a.dir))}})):"vertical"===n?(0,o.createElement)(N,(0,r.Z)({},f,{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){let e=Z(a.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=p(e))}})):null}),A=(0,o.forwardRef)((e,t)=>{let{sizes:n,onSizesChange:l,...a}=e,s=y(_,e.__scopeScrollArea),[c,u]=(0,o.useState)(),d=(0,o.useRef)(null),f=(0,i.e)(t,d,s.onScrollbarXChange);return(0,o.useEffect)(()=>{d.current&&u(getComputedStyle(d.current))},[d]),(0,o.createElement)(O,(0,r.Z)({"data-orientation":"horizontal"},a,{ref:f,sizes:n,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":F(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(s.viewport){let r=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),r>0&&r<n&&t.preventDefault()}},onResize:()=>{d.current&&s.viewport&&c&&l({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:W(c.paddingLeft),paddingEnd:W(c.paddingRight)}})}}))}),N=(0,o.forwardRef)((e,t)=>{let{sizes:n,onSizesChange:l,...a}=e,s=y(_,e.__scopeScrollArea),[c,u]=(0,o.useState)(),d=(0,o.useRef)(null),f=(0,i.e)(t,d,s.onScrollbarYChange);return(0,o.useEffect)(()=>{d.current&&u(getComputedStyle(d.current))},[d]),(0,o.createElement)(O,(0,r.Z)({"data-orientation":"vertical"},a,{ref:f,sizes:n,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":F(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(s.viewport){let r=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),r>0&&r<n&&t.preventDefault()}},onResize:()=>{d.current&&s.viewport&&c&&l({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:W(c.paddingTop),paddingEnd:W(c.paddingBottom)}})}}))}),[I,L]=h(_),O=(0,o.forwardRef)((e,t)=>{let{__scopeScrollArea:n,sizes:a,hasThumb:s,onThumbChange:c,onThumbPointerUp:u,onThumbPointerDown:d,onThumbPositionChange:p,onDragScroll:g,onWheelScroll:h,onResize:v,...w}=e,b=y(_,n),[E,S]=(0,o.useState)(null),C=(0,i.e)(t,e=>S(e)),T=(0,o.useRef)(null),R=(0,o.useRef)(""),x=b.viewport,A=a.content-a.viewport,N=(0,f.W)(h),L=(0,f.W)(p),O=Y(v,10);function D(e){T.current&&g({x:e.clientX-T.current.left,y:e.clientY-T.current.top})}return(0,o.useEffect)(()=>{let e=e=>{let t=e.target;(null==E?void 0:E.contains(t))&&N(e,A)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[x,E,A,N]),(0,o.useEffect)(L,[a,L]),X(E,O),X(b.content,O),(0,o.createElement)(I,{scope:n,scrollbar:E,hasThumb:s,onThumbChange:(0,f.W)(c),onThumbPointerUp:(0,f.W)(u),onThumbPositionChange:L,onThumbPointerDown:(0,f.W)(d)},(0,o.createElement)(l.WV.div,(0,r.Z)({},w,{ref:C,style:{position:"absolute",...w.style},onPointerDown:m(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),T.current=E.getBoundingClientRect(),R.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),D(e))}),onPointerMove:m(e.onPointerMove,D),onPointerUp:m(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=R.current,b.viewport&&(b.viewport.style.scrollBehavior=""),T.current=null})})))}),D="ScrollAreaThumb",P=(0,o.forwardRef)((e,t)=>{let{forceMount:n,...l}=e,a=L(D,e.__scopeScrollArea);return(0,o.createElement)(c,{present:n||a.hasThumb},(0,o.createElement)(k,(0,r.Z)({ref:t},l)))}),k=(0,o.forwardRef)((e,t)=>{let{__scopeScrollArea:n,style:a,...s}=e,c=y(D,n),u=L(D,n),{onThumbPositionChange:d}=u,f=(0,i.e)(t,e=>u.onThumbChange(e)),p=(0,o.useRef)(),g=Y(()=>{p.current&&(p.current(),p.current=void 0)},100);return(0,o.useEffect)(()=>{let e=c.viewport;if(e){let t=()=>{if(g(),!p.current){let t=H(e,d);p.current=t,d()}};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[c.viewport,g,d]),(0,o.createElement)(l.WV.div,(0,r.Z)({"data-state":u.hasThumb?"visible":"hidden"},s,{ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:m(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;u.onThumbPointerDown({x:n,y:r})}),onPointerUp:m(e.onPointerUp,u.onThumbPointerUp)}))}),V="ScrollAreaCorner",j=(0,o.forwardRef)((e,t)=>{let n=y(V,e.__scopeScrollArea),l=!!(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&l?(0,o.createElement)(M,(0,r.Z)({},e,{ref:t})):null}),M=(0,o.forwardRef)((e,t)=>{let{__scopeScrollArea:n,...a}=e,i=y(V,n),[s,c]=(0,o.useState)(0),[u,d]=(0,o.useState)(0),f=!!(s&&u);return X(i.scrollbarX,()=>{var e;let t=(null===(e=i.scrollbarX)||void 0===e?void 0:e.offsetHeight)||0;i.onCornerHeightChange(t),d(t)}),X(i.scrollbarY,()=>{var e;let t=(null===(e=i.scrollbarY)||void 0===e?void 0:e.offsetWidth)||0;i.onCornerWidthChange(t),c(t)}),f?(0,o.createElement)(l.WV.div,(0,r.Z)({},a,{ref:t,style:{width:s,height:u,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}})):null});function W(e){return e?parseInt(e,10):0}function U(e,t){let n=e/t;return isNaN(n)?0:n}function F(e){let t=U(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-n)*t,18)}function Z(e,t,n="ltr"){let r=F(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-o,a=t.content-t.viewport,i=function(e,[t,n]){return Math.min(n,Math.max(t,e))}(e,"ltr"===n?[0,a]:[-1*a,0]);return z([0,a],[0,l-r])(i)}function z(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}let H=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return!function o(){let l={left:e.scrollLeft,top:e.scrollTop},a=n.left!==l.left,i=n.top!==l.top;(a||i)&&t(),n=l,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function Y(e,t){let n=(0,f.W)(e),r=(0,o.useRef)(0);return(0,o.useEffect)(()=>()=>window.clearTimeout(r.current),[]),(0,o.useCallback)(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function X(e,t){let n=(0,f.W)(t);(0,s.b)(()=>{let t=0;if(e){let r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}let $=b,B=E,q=j},1538:function(e,t,n){n.d(t,{g7:function(){return a}});var r=n(2988),o=n(2265),l=n(1584);let a=(0,o.forwardRef)((e,t)=>{let{children:n,...l}=e,a=o.Children.toArray(n),s=a.find(c);if(s){let e=s.props.children,n=a.map(t=>t!==s?t:o.Children.count(e)>1?o.Children.only(null):(0,o.isValidElement)(e)?e.props.children:null);return(0,o.createElement)(i,(0,r.Z)({},l,{ref:t}),(0,o.isValidElement)(e)?(0,o.cloneElement)(e,void 0,n):null)}return(0,o.createElement)(i,(0,r.Z)({},l,{ref:t}),n)});a.displayName="Slot";let i=(0,o.forwardRef)((e,t)=>{let{children:n,...r}=e;return(0,o.isValidElement)(n)?(0,o.cloneElement)(n,{...function(e,t){let n={...t};for(let r in t){let o=e[r],l=t[r];/^on[A-Z]/.test(r)?o&&l?n[r]=(...e)=>{l(...e),o(...e)}:o&&(n[r]=o):"style"===r?n[r]={...o,...l}:"className"===r&&(n[r]=[o,l].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props),ref:t?(0,l.F)(t,n.ref):n.ref}):o.Children.count(n)>1?o.Children.only(null):null});i.displayName="SlotClone";let s=({children:e})=>(0,o.createElement)(o.Fragment,null,e);function c(e){return(0,o.isValidElement)(e)&&e.type===s}},5137:function(e,t,n){n.d(t,{W:function(){return o}});var r=n(2265);function o(e){let t=(0,r.useRef)(e);return(0,r.useEffect)(()=>{t.current=e}),(0,r.useMemo)(()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)},[])}},1336:function(e,t,n){n.d(t,{b:function(){return o}});var r=n(2265);let o=(null==globalThis?void 0:globalThis.document)?r.useLayoutEffect:()=>{}},2314:function(e,t,n){let r;n.d(t,{RJ:function(){return e_}});var o=n(2265),l=n(554);let a=()=>{},i=a(),s=Object,c=e=>e===i,u=e=>"function"==typeof e,d=(e,t)=>({...e,...t}),f=e=>u(e.then),p=new WeakMap,m=0,g=e=>{let t,n;let r=typeof e,o=e&&e.constructor,l=o==Date;if(s(e)!==e||l||o==RegExp)t=l?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):""+e;else{if(t=p.get(e))return t;if(t=++m+"~",p.set(e,t),o==Array){for(n=0,t="@";n<e.length;n++)t+=g(e[n])+",";p.set(e,t)}if(o==s){t="#";let r=s.keys(e).sort();for(;!c(n=r.pop());)c(e[n])||(t+=n+":"+g(e[n])+",");p.set(e,t)}}return t},h=new WeakMap,v={},w={},y="undefined",b=typeof window!=y,E=typeof document!=y,_=()=>b&&typeof window.requestAnimationFrame!=y,S=(e,t)=>{let n=h.get(e);return[()=>!c(t)&&e.get(t)||v,r=>{if(!c(t)){let o=e.get(t);t in w||(w[t]=o),n[5](t,d(o,r),o||v)}},n[6],()=>!c(t)&&t in w?w[t]:!c(t)&&e.get(t)||v]},C=!0,[T,R]=b&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[a,a],x={initFocus:e=>(E&&document.addEventListener("visibilitychange",e),T("focus",e),()=>{E&&document.removeEventListener("visibilitychange",e),R("focus",e)}),initReconnect:e=>{let t=()=>{C=!0,e()},n=()=>{C=!1};return T("online",t),T("offline",n),()=>{R("online",t),R("offline",n)}}},A=!o.useId,N=!b||"Deno"in window,I=e=>_()?window.requestAnimationFrame(e):setTimeout(e,1),L=N?o.useEffect:o.useLayoutEffect,O="undefined"!=typeof navigator&&navigator.connection,D=!N&&O&&(["slow-2g","2g"].includes(O.effectiveType)||O.saveData),P=e=>{if(u(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?g(e):"",t]},k=0,V=()=>++k;var j={ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:2,RECONNECT_EVENT:1};async function M(...e){let[t,n,r,o]=e,l=d({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{}),a=l.populateCache,s=l.rollbackOnError,p=l.optimisticData,m=!1!==l.revalidate,g=e=>"function"==typeof s?s(e):!1!==s,v=l.throwOnError;if(u(n)){let e=[];for(let r of t.keys())!/^\$(inf|sub)\$/.test(r)&&n(t.get(r)._k)&&e.push(r);return Promise.all(e.map(w))}return w(n);async function w(n){let o;let[l]=P(n);if(!l)return;let[s,d]=S(t,l),[w,y,b,E]=h.get(t),_=w[l],C=()=>m&&(delete b[l],delete E[l],_&&_[0])?_[0](2).then(()=>s().data):s().data;if(e.length<3)return C();let T=r,R=V();y[l]=[R,0];let x=!c(p),A=s(),N=A.data,I=A._c,L=c(I)?N:I;if(x&&d({data:p=u(p)?p(L,N):p,_c:L}),u(T))try{T=T(L)}catch(e){o=e}if(T&&f(T)){if(T=await T.catch(e=>{o=e}),R!==y[l][0]){if(o)throw o;return T}o&&x&&g(o)&&(a=!0,d({data:T=L,_c:i}))}a&&!o&&(u(a)&&(T=a(T,L)),d({data:T,error:i,_c:i})),y[l][1]=V();let O=await C();if(d({_c:i}),o){if(v)throw o;return}return a?O:T}}let W=(e,t)=>{for(let n in e)e[n][0]&&e[n][0](t)},U=(e,t)=>{if(!h.has(e)){let n=d(x,t),r={},o=M.bind(i,e),l=a,s={},c=(e,t)=>{let n=s[e]||[];return s[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},u=(t,n,r)=>{e.set(t,n);let o=s[t];if(o)for(let e of o)e(n,r)},f=()=>{if(!h.has(e)&&(h.set(e,[r,{},{},{},o,u,c]),!N)){let t=n.initFocus(setTimeout.bind(i,W.bind(i,r,0))),o=n.initReconnect(setTimeout.bind(i,W.bind(i,r,1)));l=()=>{t&&t(),o&&o(),h.delete(e)}}};return f(),[e,o,f,l]}return[e,h.get(e)[4]]},[F,Z]=U(new Map),z=d({onLoadingSlow:a,onSuccess:a,onError:a,onErrorRetry:(e,t,n,r,o)=>{let l=n.errorRetryCount,a=o.retryCount,i=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;(c(l)||!(a>l))&&setTimeout(r,i,o)},onDiscarded:a,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:D?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:D?5e3:3e3,compare:(e,t)=>g(e)==g(t),isPaused:()=>!1,cache:F,mutate:Z,fallback:{}},{isOnline:()=>C,isVisible:()=>{let e=E&&document.visibilityState;return c(e)||"hidden"!==e}}),H=(e,t)=>{let n=d(e,t);if(t){let{use:r,fallback:o}=e,{use:l,fallback:a}=t;r&&l&&(n.use=r.concat(l)),o&&a&&(n.fallback=d(o,a))}return n},Y=(0,o.createContext)({}),X=b&&window.__SWR_DEVTOOLS_USE__,$=X?window.__SWR_DEVTOOLS_USE__:[],B=e=>u(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],q=()=>d(z,(0,o.useContext)(Y)),J=$.concat(e=>(t,n,r)=>{let o=n&&((...e)=>{let[r]=P(t),[,,,o]=h.get(F),l=o[r];return c(l)?n(...e):(delete o[r],l)});return e(t,o,r)}),G=(e,t,n)=>{let r=t[e]||(t[e]=[]);return r.push(n),()=>{let e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}};X&&(window.__SWR_DEVTOOLS_REACT__=o);let K=o.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}),Q={dedupe:!0};s.defineProperty(e=>{let{value:t}=e,n=(0,o.useContext)(Y),r=u(t),l=(0,o.useMemo)(()=>r?t(n):t,[r,n,t]),a=(0,o.useMemo)(()=>r?l:H(n,l),[r,n,l]),s=l&&l.provider,c=(0,o.useRef)(i);s&&!c.current&&(c.current=U(s(a.cache||F),l));let f=c.current;return f&&(a.cache=f[0],a.mutate=f[1]),L(()=>{if(f)return f[2]&&f[2](),f[3]},[]),(0,o.createElement)(Y.Provider,d(e,{value:a}))},"defaultValue",{value:z});let ee=(r=(e,t,n)=>{let{cache:r,compare:a,suspense:s,fallbackData:f,revalidateOnMount:p,revalidateIfStale:m,refreshInterval:g,refreshWhenHidden:v,refreshWhenOffline:w,keepPreviousData:y}=n,[b,E,_,C]=h.get(r),[T,R]=P(e),x=(0,o.useRef)(!1),O=(0,o.useRef)(!1),D=(0,o.useRef)(T),k=(0,o.useRef)(t),W=(0,o.useRef)(n),U=()=>W.current,F=()=>U().isVisible()&&U().isOnline(),[Z,z,H,Y]=S(r,T),X=(0,o.useRef)({}).current,$=c(f)?n.fallback[T]:f,B=(e,t)=>{for(let n in X)if("data"===n){if(!a(e[n],t[n])&&(!c(e[n])||!a(ea,t[n])))return!1}else if(t[n]!==e[n])return!1;return!0},q=(0,o.useMemo)(()=>{let e=!!T&&!!t&&(c(p)?!U().isPaused()&&!s&&(!!c(m)||m):p),n=t=>{let n=d(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},r=Z(),o=Y(),l=n(r),a=r===o?l:n(o),i=l;return[()=>{let e=n(Z());return B(e,i)?(i.data=e.data,i.isLoading=e.isLoading,i.isValidating=e.isValidating,i.error=e.error,i):(i=e,e)},()=>a]},[r,T]),J=(0,l.useSyncExternalStore)((0,o.useCallback)(e=>H(T,(t,n)=>{B(n,t)||e()}),[r,T]),q[0],q[1]),ee=!x.current,et=b[T]&&b[T].length>0,en=J.data,er=c(en)?$:en,eo=J.error,el=(0,o.useRef)(er),ea=y?c(en)?el.current:en:er,ei=(!et||!!c(eo))&&(ee&&!c(p)?p:!U().isPaused()&&(s?!c(er)&&m:c(er)||m)),es=!!(T&&t&&ee&&ei),ec=c(J.isValidating)?es:J.isValidating,eu=c(J.isLoading)?es:J.isLoading,ed=(0,o.useCallback)(async e=>{let t,r;let o=k.current;if(!T||!o||O.current||U().isPaused())return!1;let l=!0,s=e||{},d=!_[T]||!s.dedupe,f=()=>A?!O.current&&T===D.current&&x.current:T===D.current,p={isValidating:!1,isLoading:!1},m=()=>{z(p)},g=()=>{let e=_[T];e&&e[1]===r&&delete _[T]},h={isValidating:!0};c(Z().data)&&(h.isLoading=!0);try{if(d&&(z(h),n.loadingTimeout&&c(Z().data)&&setTimeout(()=>{l&&f()&&U().onLoadingSlow(T,n)},n.loadingTimeout),_[T]=[o(R),V()]),[t,r]=_[T],t=await t,d&&setTimeout(g,n.dedupingInterval),!_[T]||_[T][1]!==r)return d&&f()&&U().onDiscarded(T),!1;p.error=i;let e=E[T];if(!c(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return m(),d&&f()&&U().onDiscarded(T),!1;let s=Z().data;p.data=a(s,t)?s:t,d&&f()&&U().onSuccess(t,T,n)}catch(n){g();let e=U(),{shouldRetryOnError:t}=e;!e.isPaused()&&(p.error=n,d&&f()&&(e.onError(n,T,e),(!0===t||u(t)&&t(n))&&F()&&e.onErrorRetry(n,T,e,e=>{let t=b[T];t&&t[0]&&t[0](j.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return l=!1,m(),!0},[T,r]),ef=(0,o.useCallback)((...e)=>M(r,D.current,...e),[]);if(L(()=>{k.current=t,W.current=n,c(en)||(el.current=en)}),L(()=>{if(!T)return;let e=ed.bind(i,Q),t=0,n=G(T,b,(n,r={})=>{if(n==j.FOCUS_EVENT){let n=Date.now();U().revalidateOnFocus&&n>t&&F()&&(t=n+U().focusThrottleInterval,e())}else if(n==j.RECONNECT_EVENT)U().revalidateOnReconnect&&F()&&e();else if(n==j.MUTATE_EVENT)return ed();else if(n==j.ERROR_REVALIDATE_EVENT)return ed(r)});return O.current=!1,D.current=T,x.current=!0,z({_k:R}),ei&&(c(er)||N?e():I(e)),()=>{O.current=!0,n()}},[T]),L(()=>{let e;function t(){let t=u(g)?g(Z().data):g;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!Z().error&&(v||U().isVisible())&&(w||U().isOnline())?ed(Q).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[g,v,w,T]),(0,o.useDebugValue)(ea),s&&c(er)&&T){if(!A&&N)throw Error("Fallback data is required when using suspense in SSR.");k.current=t,W.current=n,O.current=!1;let e=C[T];if(c(e)||K(ef(e)),c(eo)){let e=ed(Q);c(ea)||(e.status="fulfilled",e.value=!0),K(e)}else throw eo}return{mutate:ef,get data(){return X.data=!0,ea},get error(){return X.error=!0,eo},get isValidating(){return X.isValidating=!0,ec},get isLoading(){return X.isLoading=!0,eu}}},function(...e){let t=q(),[n,o,l]=B(e),a=H(t,l),i=r,{use:s}=a,c=(s||[]).concat(J);for(let e=c.length;e--;)i=c[e](i);return i(n,o||a.fetcher||null,a)});var et=((e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),en={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},er={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},eo={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},el={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},ea={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ei={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},es={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},ec={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>null==e||"object"!=typeof e||!("id"in e)||"string"!=typeof e.id||!("type"in e)||"string"!=typeof e.type||!("function"in e)||null==e.function||"object"!=typeof e.function||!("arguments"in e.function)||"string"!=typeof e.function.name||"string"!=typeof e.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},eu={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},ed={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},ef={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId", "toolName", "args", and "result" property.');return{type:"tool_result",value:e}}},ep={[en.code]:en,[er.code]:er,[eo.code]:eo,[el.code]:el,[ea.code]:ea,[ei.code]:ei,[es.code]:es,[ec.code]:ec,[eu.code]:eu,[ed.code]:ed,[ef.code]:ef};en.name,en.code,er.name,er.code,eo.name,eo.code,el.name,el.code,ea.name,ea.code,ei.name,ei.code,es.name,es.code,ec.name,ec.code,eu.name,eu.code,ed.name,ed.code,ef.name,ef.code;var em=[en,er,eo,el,ea,ei,es,ec,eu,ed,ef].map(e=>e.code),eg=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let n=e.slice(0,t);if(!em.includes(n))throw Error("Failed to parse stream string. Invalid code ".concat(n,"."));let r=JSON.parse(e.slice(t+1));return ep[n].parse(r)};async function*eh(e){let{isAborted:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new TextDecoder,r=[],o=0;for(;;){let{value:l}=await e.read();if(l&&(r.push(l),o+=l.length,10!==l[l.length-1]))continue;if(0===r.length)break;let a=function(e,t){let n=new Uint8Array(t),r=0;for(let t of e)n.set(t,r),r+=t.length;return e.length=0,n}(r,o);for(let e of(o=0,n.decode(a,{stream:!0}).split("\n").filter(e=>""!==e).map(eg)))yield e;if(null==t?void 0:t()){e.cancel();break}}}function ev(e,t){return e&&t&&t.length?{...e,annotations:[...t]}:e}async function ew(e){let t,{reader:n,abortControllerRef:r,update:o,onFinish:l,generateId:a=et,getCurrentDate:i=()=>new Date}=e,s=i(),c={data:[]};for await(let{type:e,value:l}of eh(n,{isAborted:()=>(null==r?void 0:r.current)===null})){if("text"===e&&(c.text?c.text={...c.text,content:(c.text.content||"")+l}:c.text={id:a(),role:"assistant",content:l,createdAt:s}),"tool_call"===e)null==c.text&&(c.text={id:a(),role:"assistant",content:"",createdAt:s}),null==c.text.toolInvocations&&(c.text.toolInvocations=[]),c.text.toolInvocations.push(l);else if("tool_result"===e){null==c.text&&(c.text={id:a(),role:"assistant",content:"",createdAt:s}),null==c.text.toolInvocations&&(c.text.toolInvocations=[]);let e=c.text.toolInvocations.findIndex(e=>e.toolCallId===l.toolCallId);-1!==e?c.text.toolInvocations[e]=l:c.text.toolInvocations.push(l)}let n=null;"function_call"===e&&(c.function_call={id:a(),role:"assistant",content:"",function_call:l.function_call,name:l.function_call.name,createdAt:s},n=c.function_call);let r=null;"tool_calls"===e&&(c.tool_calls={id:a(),role:"assistant",content:"",tool_calls:l.tool_calls,createdAt:s},r=c.tool_calls),"data"===e&&c.data.push(...l);let i=c.text;"message_annotations"===e&&(t?t.push(...l):t=[...l],n=ev(c.function_call,t),r=ev(c.tool_calls,t),i=ev(c.text,t)),(null==t?void 0:t.length)&&["text","function_call","tool_calls"].forEach(e=>{c[e]&&(c[e].annotations=[...t])}),o([n,r,i].filter(Boolean).map(e=>({...ev(e,t)})),[...c.data])}return null==l||l(c),{messages:[c.text,c.function_call,c.tool_calls].filter(Boolean),data:c.data}}async function ey(e){var t;let{api:n,messages:r,body:o,streamMode:l="stream-data",credentials:a,headers:i,abortController:s,restoreMessagesOnFailure:c,onResponse:u,onUpdate:d,onFinish:f,generateId:p}=e,m=await fetch(n,{method:"POST",body:JSON.stringify({messages:r,...o}),headers:{"Content-Type":"application/json",...i},signal:null==(t=null==s?void 0:s())?void 0:t.signal,credentials:a}).catch(e=>{throw c(),e});if(u)try{await u(m)}catch(e){throw e}if(!m.ok)throw c(),Error(await m.text()||"Failed to fetch the chat response.");if(!m.body)throw Error("The response body is empty.");let g=m.body.getReader();switch(l){case"text":{let e=function(e){let t=new TextDecoder;return function(e){return e?t.decode(e,{stream:!0}):""}}(),t={id:p(),createdAt:new Date,role:"assistant",content:""};for(;;){let{done:n,value:r}=await g.read();if(n)break;if(t.content+=e(r),t.id=p(),d([{...t}],[]),(null==s?void 0:s())===null){g.cancel();break}}return null==f||f(t),{messages:[t],data:[]}}case"stream-data":return await ew({reader:g,abortControllerRef:null!=s?{current:s()}:void 0,update:d,onFinish(e){f&&null!=e.text&&f(e.text)},generateId:p});default:throw Error("Unknown stream mode: ".concat(l))}}async function eb(e){let{getStreamedResponse:t,experimental_onFunctionCall:n,experimental_onToolCall:r,updateChatRequest:o,getCurrentMessages:l}=e;for(;;){let e=await t();if("messages"in e){let t=!1;for(let a of e.messages)if(void 0!==a.function_call&&"string"!=typeof a.function_call||void 0!==a.tool_calls&&"string"!=typeof a.tool_calls){if(t=!0,n){let e=a.function_call;if("object"!=typeof e){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let r=await n(l(),e);if(void 0===r){t=!1;break}o(r)}if(r){let e=a.tool_calls;if(!Array.isArray(e)||e.some(e=>"object"!=typeof e)){console.warn("experimental_onToolCall should not be defined when using tools");continue}let n=await r(l(),e);if(void 0===n){t=!1;break}o(n)}}if(!t)break}else{let t=function(e){for(let t of e.messages){if(void 0!==t.tool_calls)for(let e of t.tool_calls)"object"==typeof e&&e.function.arguments&&"string"!=typeof e.function.arguments&&(e.function.arguments=JSON.stringify(e.function.arguments));void 0!==t.function_call&&"object"==typeof t.function_call&&t.function_call.arguments&&"string"!=typeof t.function_call.arguments&&(t.function_call.arguments=JSON.stringify(t.function_call.arguments))}};if((void 0===e.function_call||"string"==typeof e.function_call)&&(void 0===e.tool_calls||"string"==typeof e.tool_calls))break;if(n){let r=e.function_call;if("object"!=typeof r){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let a=await n(l(),r);if(void 0===a)break;t(a),o(a)}if(r){let n=e.tool_calls;if("object"!=typeof n){console.warn("experimental_onToolCall should not be defined when using functions");continue}let a=await r(l(),n);if(void 0===a)break;t(a),o(a)}}}}var eE=async(e,t,n,r,o,l,a,i,s,c,u,d,f)=>{var p,m;let g=a.current;n(t.messages,!1);let h=f?t.messages:t.messages.map(e=>{let{role:t,content:n,name:r,toolInvocations:o,function_call:l,tool_calls:a,tool_call_id:i}=e;return{role:t,content:n,...void 0!==r&&{name:r},...void 0!==o&&{toolInvocations:o},tool_call_id:i,...void 0!==l&&{function_call:l},...void 0!==a&&{tool_calls:a}}});if("string"!=typeof e){let r={id:s(),createdAt:new Date,content:"",role:"assistant"};async function v(e){let{content:o,ui:l,next:a}=await e;r.content=o,r.ui=await l,n([...t.messages,{...r}],!1),a&&await v(a)}try{let n=e({messages:h,data:t.data});await v(n)}catch(e){throw n(g,!1),e}return u&&u(r),r}return await ey({api:e,messages:h,body:{data:t.data,...l.current.body,...null==(p=t.options)?void 0:p.body,...void 0!==t.functions&&{functions:t.functions},...void 0!==t.function_call&&{function_call:t.function_call},...void 0!==t.tools&&{tools:t.tools},...void 0!==t.tool_choice&&{tool_choice:t.tool_choice}},streamMode:c,credentials:l.current.credentials,headers:{...l.current.headers,...null==(m=t.options)?void 0:m.headers},abortController:()=>i.current,restoreMessagesOnFailure(){n(g,!1)},onResponse:d,onUpdate(e,l){n([...t.messages,...e],!1),r([...o||[],...l||[]],!1)},onFinish:u,generateId:s})};function e_(){let{api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:l,experimental_onFunctionCall:a,experimental_onToolCall:i,experimental_maxAutomaticRoundtrips:s=0,streamMode:c,onResponse:u,onFinish:d,onError:f,credentials:p,headers:m,body:g,generateId:h=et}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,o.useId)(),w=null!=t?t:v,y="string"==typeof e?[e,w]:w,[b]=(0,o.useState)([]),{data:E,mutate:_}=ee([y,"messages"],null,{fallbackData:null!=n?n:b}),{data:S=!1,mutate:C}=ee([y,"loading"],null),{data:T,mutate:R}=ee([y,"streamData"],null),{data:x,mutate:A}=ee([y,"error"],null),N=(0,o.useRef)(E||[]);(0,o.useEffect)(()=>{N.current=E||[]},[E]);let I=(0,o.useRef)(null),L=(0,o.useRef)({credentials:p,headers:m,body:g});(0,o.useEffect)(()=>{L.current={credentials:p,headers:m,body:g}},[p,m,g]);let O=(0,o.useCallback)(async t=>{try{C(!0),A(void 0);let n=new AbortController;I.current=n,await eb({getStreamedResponse:()=>eE(e,t,_,R,T,L,N,I,h,c,d,u,l),experimental_onFunctionCall:a,experimental_onToolCall:i,updateChatRequest:e=>{t=e},getCurrentMessages:()=>N.current}),I.current=null}catch(e){if("AbortError"===e.name)return I.current=null,null;f&&e instanceof Error&&f(e),A(e)}finally{C(!1)}let n=N.current,r=n[n.length-1];null!=r&&s>0&&eS(r)&&function(e){let t=0;for(let n=e.length-1;n>=0;n--)if("assistant"===e[n].role)t++;else break;return t}(n)<=s&&await O({messages:n})},[_,C,e,L,u,d,f,A,R,T,c,l,a,i,s,N,I,h]),D=(0,o.useCallback)(async function(e){let{options:t,functions:n,function_call:r,tools:o,tool_choice:l,data:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.id||(e.id=h()),O({messages:N.current.concat(e),options:t,data:a,...void 0!==n&&{functions:n},...void 0!==r&&{function_call:r},...void 0!==o&&{tools:o},...void 0!==l&&{tool_choice:l}})},[O,h]),P=(0,o.useCallback)(async function(){let{options:e,functions:t,function_call:n,tools:r,tool_choice:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===N.current.length?null:"assistant"===N.current[N.current.length-1].role?O({messages:N.current.slice(0,-1),options:e,...void 0!==t&&{functions:t},...void 0!==n&&{function_call:n},...void 0!==r&&{tools:r},...void 0!==o&&{tool_choice:o}}):O({messages:N.current,options:e,...void 0!==t&&{functions:t},...void 0!==n&&{function_call:n},...void 0!==r&&{tools:r},...void 0!==o&&{tool_choice:o}})},[O]),k=(0,o.useCallback)(()=>{I.current&&(I.current.abort(),I.current=null)},[]),V=(0,o.useCallback)(e=>{_(e,!1),N.current=e},[_]),[j,M]=(0,o.useState)(r),W=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n&&(L.current={...L.current,...n}),e.preventDefault(),j&&(D({content:j,role:"user",createdAt:new Date},t),M(""))},[j,D]);return{messages:E||[],error:x,append:D,reload:P,stop:k,setMessages:V,input:j,setInput:M,handleInputChange:e=>{M(e.target.value)},handleSubmit:W,isLoading:S,data:T,experimental_addToolResult:e=>{let{toolCallId:t,result:n}=e,r=N.current.map((e,r,o)=>r===o.length-1&&"assistant"===e.role&&e.toolInvocations?{...e,toolInvocations:e.toolInvocations.map(e=>e.toolCallId===t?{...e,result:n}:e)}:e);_(r,!1),eS(r[r.length-1])&&O({messages:r})}}}function eS(e){return"assistant"===e.role&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(e=>"result"in e)}},2218:function(e,t,n){n.d(t,{j:function(){return l}});let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,o=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,r,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(o&&(o+=" "),o+=r);else for(n in t)t[n]&&(o&&(o+=" "),o+=n)}return o}(e))&&(r&&(r+=" "),r+=t);return r},l=(e,t)=>n=>{var l;if((null==t?void 0:t.variants)==null)return o(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(e=>{let t=null==n?void 0:n[e],o=null==i?void 0:i[e];if(null===t)return null;let l=r(t)||r(o);return a[e][l]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return o(e,s,null==t?void 0:null===(l=t.compoundVariants)||void 0===l?void 0:l.reduce((e,t)=>{let{class:n,className:r,...o}=t;return Object.entries(o).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...i,...c}[t]):({...i,...c})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}}]);